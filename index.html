<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Element</title>
  </head>
  <body>
    <div id="root">
      <div id="delete-account">
        <p>Elements</p>
        <component-button1>yes</component-button1>
        <component-button2 color="blue">no</component-button2>
      </div>
    </div>

    <script>
      function elementToObject(element) {
        const type = element.tagName.toLowerCase();

        const props = {};

        for (let attr of element.attributes) {
          props[attr.name] = attr.value;
        }

        const children = [];
        for (let node of element.childNodes) {
          if (node.nodeType === Node.TEXT_NODE) {
            const text = node.textContent.trim();
            if (text) children.push(text);
          } else if (node.nodeType === Node.ELEMENT_NODE) {
            children.push(elementToObject(node));
          }
        }

        if (children.length > 0) {
          props.children = children.length === 1 ? children[0] : children;
        }

        return { type, props };
      }

      window.addEventListener("DOMContentLoaded", () => {
        const rootElement = document.getElementById("delete-account");
        const resultObject = elementToObject(rootElement);
        // console.log(resultObject);

        // 최종결과d;la
        console.log(JSON.stringify(resultObject, null, 2));
      });
    </script>
  </body>
</html>
